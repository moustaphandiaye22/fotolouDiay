# üõçÔ∏è FotoLouJay - Plateforme de Vente en Ligne

[![Angular](https://img.shields.io/badge/Angular-20.3.0-red.svg)](https://angular.io/)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.5.3-blue.svg)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-5.19.1-2D3748.svg)](https://www.prisma.io/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-4479A1.svg)](https://www.mysql.com/)

Une plateforme moderne de vente en ligne d√©velopp√©e au S√©n√©gal pour FotoLouJay, permettant aux utilisateurs de vendre et acheter des produits avec un syst√®me de mod√©ration avanc√© et des paiements s√©curis√©s.

## üìã Table des mati√®res

- [üèóÔ∏è Architecture](#-architecture)
- [‚ú® Fonctionnalit√©s](#-fonctionnalit√©s)
- [üöÄ Installation et Configuration](#-installation-et-configuration)
- [üì± Utilisation](#-utilisation)
- [üîê Authentification](#-authentification)
- [üë• R√¥les Utilisateurs](#-r√¥les-utilisateurs)
- [üõçÔ∏è Gestion des Produits](#Ô∏è-gestion-des-produits)
- [üí≥ Syst√®me de Paiement](#-syst√®me-de-paiement)
- [üõ°Ô∏è Mod√©ration](#Ô∏è-mod√©ration)
- [üìä API Documentation](#-api-documentation)
- [üß™ Tests](#-tests)
- [üöÄ D√©ploiement](#-d√©ploiement)
- [ü§ù Contribution](#-contribution)
- [üìÑ Licence](#-licence)

## üèóÔ∏è Architecture

### Backend
- **Framework**: Node.js + Express.js
- **Langage**: TypeScript
- **Base de donn√©es**: MySQL avec Prisma ORM
- **Authentification**: JWT (JSON Web Tokens)
- **Upload de fichiers**: Multer avec stockage local
- **Logging**: Winston
- **Validation**: Express-validator + Zod

### Frontend
- **Framework**: Angular 20 (Standalone Components)
- **UI Library**: Angular Material
- **Styling**: SCSS avec th√®me personnalis√©
- **State Management**: Services Angular + RxJS
- **Routing**: Angular Router avec lazy loading

### Base de donn√©es
- **SGBD**: MySQL 8.0+
- **ORM**: Prisma
- **Migration**: Prisma Migrate
- **Seeding**: Donn√©es de test automatiques

## ‚ú® Fonctionnalit√©s

### üîê Authentification & Autorisation
- Inscription et connexion utilisateur
- Gestion des r√¥les (Utilisateur, Vendeur, Mod√©rateur, Administrateur)
- JWT pour l'authentification stateless
- Guards Angular pour la protection des routes

### üõçÔ∏è Marketplace
- Catalogue de produits avec recherche et filtres
- Pagination c√¥t√© serveur
- Produits VIP et standards
- G√©olocalisation des produits
- Syst√®me de notation et commentaires

### üì∏ Gestion des Images
- Upload s√©curis√© de photos (appareil photo uniquement)
- Validation stricte des m√©tadonn√©es
- Stockage optimis√© avec compression
- Support multi-formats (JPEG, PNG)

### üí∞ Paiements Int√©gr√©s
- Int√©gration Wave Money
- Int√©gration Orange Money
- Int√©gration PayTech
- Suivi des transactions
- Remboursements automatiques

### üõ°Ô∏è Mod√©ration
- Validation manuelle des produits
- Syst√®me de signalement
- Gestion des utilisateurs probl√©matiques
- Logs d'audit complets

### üì¢ Notifications
- Notifications en temps r√©el
- Alertes de mod√©ration
- Rappels d'expiration
- Notifications push (futur)

## üöÄ Installation et Configuration

### Pr√©requis
- **Node.js** 18+ et npm
- **MySQL** 8.0+ ou MariaDB
- **Angular CLI** 20+ (pour le d√©veloppement frontend)
- **Git**

### 1. Clonage du projet
```bash
git clone https://github.com/khoussngom/fotoloujay.git
cd fotoloujay
```

### 2. Configuration du Backend
```bash
cd backend

# Installation des d√©pendances
npm install

# Configuration de la base de donn√©es
cp .env.example .env
# √âditer .env avec vos param√®tres MySQL

# Migration de la base de donn√©es
npx prisma generate
npx prisma db push

# Cr√©ation des donn√©es de test
npm run seed
```

### 3. Configuration du Frontend
```bash
cd ../frontend/fotoloujay-frontend

# Installation des d√©pendances
npm install

# Configuration de l'API (si n√©cessaire)
# √âditer src/environments/environment.ts
```

### 4. D√©marrage des services
```bash
# Terminal 1: Backend
cd backend
npm run dev

# Terminal 2: Frontend
cd frontend/fotoloujay-frontend
npm start
```

### Variables d'environnement (.env)
```env
# Base de donn√©es
DATABASE_URL="mysql://username:password@localhost:3306/fotoloujay"

# JWT
JWT_SECRET="votre_secret_jwt_tres_securise"
JWT_EXPIRES_IN="24h"

# Serveur
PORT=3001
NODE_ENV=development

# Upload
MAX_FILE_SIZE=2097152
ALLOWED_FILE_TYPES="image/jpeg,image/png"

# API Frontend
API_BASE_URL="http://localhost:3001/api"
```

## üì± Utilisation

### Comptes de test
Apr√®s ex√©cution de `npm run seed`, les comptes suivants sont disponibles :

| Email | Mot de passe | R√¥le |
|-------|--------------|------|
| `admin@fotoljay.sn` | `admin2024` | ADMINISTRATEUR |
| `khoussn@gmail.com` | `marakhib` | ADMINISTRATEUR |
| `amadou.diop@fotoljay.sn` | `password123` | MODERATEUR |
| `fatou.fall@fotoljay.sn` | `password123` | MODERATEUR |
| `moussa.ndiaye@fotoljay.sn` | `password123` | UTILISATEUR |

### Workflow utilisateur

1. **Inscription/Connexion**
   - Cr√©er un compte ou se connecter
   - V√©rification email (futur)

2. **Navigation**
   - Parcourir les produits publics
   - Utiliser les filtres (prix, cat√©gorie, localisation)
   - Consulter les d√©tails des produits

3. **Vente de produits**
   - Cr√©er un compte vendeur
   - Ajouter des produits avec photos
   - Attendre la validation mod√©rateur
   - G√©rer ses annonces

4. **Achat**
   - S√©lectionner un produit
   - Proc√©der au paiement
   - Confirmation et livraison

## üîê Authentification

### Inscription
```json
POST /api/auth/inscription
{
  "nom": "Diop",
  "prenom": "Amadou",
  "email": "amadou.diop@fotoljay.sn",
  "telephone": "+221 77 123 45 67",
  "motDePasse": "motDePasseSecurise123"
}
```

### Connexion
```json
POST /api/auth/connexion
{
  "email": "amadou.diop@fotoljay.sn",
  "motDePasse": "motDePasseSecurise123"
}
```

## üë• R√¥les Utilisateurs

### üë§ Utilisateur (USER)
- Parcourir les produits
- Acheter des produits
- Cr√©er un compte vendeur
- Contacter les vendeurs

### üõí Vendeur (VENDOR)
- Toutes les permissions Utilisateur
- Cr√©er et g√©rer ses produits
- Voir ses statistiques de vente
- R√©pondre aux messages clients

### üëÆ Mod√©rateur (MODERATOR)
- Toutes les permissions Vendeur
- Valider/Rejeter les produits
- G√©rer les signalements
- Voir les statistiques globales

### üëë Administrateur (ADMIN)
- Toutes les permissions Mod√©rateur
- G√©rer les utilisateurs
- Modifier les r√¥les
- Acc√®s aux logs syst√®me

## üõçÔ∏è Gestion des Produits

### Cr√©ation de produit
```typescript
// Service Angular
const formData = new FormData();
formData.append('nom', 'iPhone 15 Pro Max');
formData.append('description', 'T√©l√©phone neuf sous garantie');
formData.append('prix', '850000');
formData.append('localisation', 'Dakar Plateau');
formData.append('sourceType', 'camera_capture_only');
formData.append('securityLevel', 'authenticated_photos');
formData.append('photo', capturedImageFile);

this.produitService.createProduit(formData).subscribe(response => {
  console.log('Produit cr√©√©:', response);
});
```

### Recherche et filtres
```typescript
// Recherche avec filtres
this.produitService.getProduitsPublics({
  recherche: 'iPhone',
  categorie: 'T√©l√©phone',
  prixMin: 100000,
  prixMax: 1000000,
  estVip: true,
  page: 1,
  limite: 20
}).subscribe(response => {
  this.produits = response.data.produits;
  this.pagination = response.data.pagination;
});
```

## üí≥ Syst√®me de Paiement

### Prestataires support√©s
- **Wave Money** - Paiement mobile populaire au S√©n√©gal
- **Orange Money** - Solution Orange
- **PayTech** - Passerelle de paiement
- **Carte bancaire** - VISA/Mastercard

### Workflow de paiement
1. S√©lection du produit
2. Choix du prestataire
3. G√©n√©ration de r√©f√©rence de paiement
4. Redirection vers l'interface de paiement
5. Confirmation et validation
6. Mise √† jour du statut

## üõ°Ô∏è Mod√©ration

### Processus de validation
1. **Soumission** - Vendeur cr√©e un produit
2. **En attente** - Produit en file d'attente
3. **Validation** - Mod√©rateur approuve/rejette
4. **Publication** - Produit visible publiquement

### R√®gles de mod√©ration
- **Photos authentiques** uniquement (appareil photo)
- **Descriptions compl√®tes** et pr√©cises
- **Prix r√©alistes** selon le march√©
- **Informations de contact** valides

## üìä API Documentation

### Endpoints principaux

#### Authentification
- `POST /api/auth/inscription` - Cr√©er un compte
- `POST /api/auth/connexion` - Se connecter
- `GET /api/auth/verifier-token` - V√©rifier le token
- `GET /api/auth/profil` - Profil utilisateur

#### Produits
- `GET /api/produits/publics` - Produits publics
- `GET /api/produits/vip` - Produits VIP
- `GET /api/produits/mes-produits` - Mes produits
- `POST /api/produits` - Cr√©er un produit
- `PUT /api/produits/:id` - Modifier un produit
- `DELETE /api/produits/:id` - Supprimer un produit

#### Mod√©ration
- `GET /api/produits` - Tous les produits (mod√©ration)
- `PUT /api/produits/:id/valider` - Valider un produit
- `PUT /api/produits/:id/rejeter` - Rejeter un produit

#### Paiements
- `POST /api/paiements/initier` - Initier un paiement
- `GET /api/paiements/:id` - D√©tails du paiement
- `POST /api/paiements/confirmer` - Confirmer un paiement

## üß™ Tests

### Tests Backend
```bash
cd backend
npm test
```

### Tests Frontend
```bash
cd frontend/fotoloujay-frontend
npm test
```

### Tests E2E
```bash
cd frontend/fotoloujay-frontend
npm run e2e
```

### Tests manuels avec cURL
```bash
# Test de l'API
curl -X GET "http://localhost:3001/api/health"

# Test des produits publics
curl -X GET "http://localhost:3001/api/produits/publics?limite=5"

# Test de connexion
curl -X POST "http://localhost:3001/api/auth/connexion" \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@fotoljay.sn","password":"admin2024"}'
```

## üöÄ D√©ploiement

### Backend (Railway, Render, Heroku)
```bash
# Build de production
npm run build

# D√©marrage en production
npm start
```

### Frontend (Vercel, Netlify)
```bash
# Build de production
npm run build

# Les fichiers sont dans dist/fotoloujay-frontend/
```

### Configuration production
```env
NODE_ENV=production
DATABASE_URL="mysql://prod_user:prod_pass@prod_host:3306/fotoloujay_prod"
JWT_SECRET="production_jwt_secret_very_secure"
```

## üìÅ Structure du projet

```
fotoloujay/
‚îú‚îÄ‚îÄ backend/                          # API Backend
‚îÇ   ‚îú‚îÄ‚îÄ controllers/                  # Contr√¥leurs
‚îÇ   ‚îú‚îÄ‚îÄ routes/                       # Routes API
‚îÇ   ‚îú‚îÄ‚îÄ services/                     # Services m√©tier
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/                  # Middlewares
‚îÇ   ‚îú‚îÄ‚îÄ validators/                   # Validation des donn√©es
‚îÇ   ‚îú‚îÄ‚îÄ prisma/                       # Base de donn√©es
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma            # Sch√©ma Prisma
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.ts                  # Donn√©es de test
‚îÇ   ‚îú‚îÄ‚îÄ uploads/                     # Images upload√©es
‚îÇ   ‚îî‚îÄ‚îÄ logs/                        # Logs application
‚îú‚îÄ‚îÄ frontend/fotoloujay-frontend/     # Application Angular
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                # Authentification
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ produits/            # Gestion produits
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/           # Tableaux de bord
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Services Angular
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ guards/              # Guards de route
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models/              # Mod√®les TypeScript
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/                  # Assets statiques
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ environments/            # Configuration
‚îÇ   ‚îî‚îÄ‚îÄ dist/                        # Build de production
‚îú‚îÄ‚îÄ README.md                         # Documentation
‚îî‚îÄ‚îÄ TODO.md                          # T√¢ches en cours
```

## üîß Scripts utiles

### Backend
```bash
# D√©veloppement
npm run dev              # D√©marrage avec nodemon
npm run build           # Compilation TypeScript
npm start               # D√©marrage production

# Base de donn√©es
npm run prisma:generate # G√©n√©rer client Prisma
npm run prisma:migrate  # Migrer la base
npm run prisma:seed     # Cr√©er donn√©es de test
npm run prisma:reset    # Reset complet DB

# Maintenance
npm run prisma:studio   # Interface graphique Prisma
```

### Frontend
```bash
# D√©veloppement
npm start               # Serveur dev (port 4200)
npm run build          # Build production
npm run watch          # Build avec watch

# Tests
npm test               # Tests unitaires
npm run e2e           # Tests end-to-end
```

## ü§ù Contribution

1. **Fork** le projet
2. Cr√©er une **branche feature** (`git checkout -b feature/nouvelle-fonctionnalite`)
3. **Commit** vos changements (`git commit -m 'Ajout nouvelle fonctionnalit√©'`)
4. **Push** vers la branche (`git push origin feature/nouvelle-fonctionnalite`)
5. Ouvrir une **Pull Request**

### Standards de code
- **TypeScript** strict pour le backend
- **ESLint** et **Prettier** configur√©s
- **Tests unitaires** requis
- **Documentation** des APIs
- **Commits** conventionnels

## üìÑ Licence

Ce projet est sous licence **ISC**.

---

## üá∏üá≥ √Ä propos

**FotoLouJay** est une plateforme de e-commerce d√©velopp√©e au S√©n√©gal pour faciliter la vente et l'achat de produits entre particuliers et professionnels. Notre mission est de cr√©er un marketplace s√©curis√©, moderne et accessible √† tous les S√©n√©galais.

### √âquipe
- **D√©veloppement Backend**: moustapha ndiaye
- **D√©veloppement Frontend**: moustapha ndiaye
- **Design UI/UX**: moustapha ndiaye
- **Product Management**:moustapha ndiaye


---

*D√©velopp√© par moustapha ndiaye FotoLouJay* üá∏üá≥
