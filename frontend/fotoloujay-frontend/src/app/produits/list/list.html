<div class="produits-container">
  <div class="header">
    <h1>Mes Produits</h1>
    <button mat-raised-button color="primary" routerLink="/produits/create">
      <mat-icon>add</mat-icon>
      Ajouter un produit
    </button>
  </div>

  <div *ngIf="isLoading" class="loading">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Chargement de vos produits...</p>
  </div>

  <div *ngIf="!isLoading && errorMessage" class="error-message">
    <mat-icon>error</mat-icon>
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && produits.length === 0" class="no-produits">
    <mat-icon class="large-icon">inventory_2</mat-icon>
    <h3>Aucun produit</h3>
    <p>Vous n'avez pas encore publi√© de produit.</p>
    <button mat-raised-button color="primary" routerLink="/produits/create">
      Publier mon premier produit
    </button>
  </div>

  <div *ngIf="!isLoading && produits.length > 0" class="produits-grid">
    <mat-card *ngFor="let produit of produits" class="produit-card" [routerLink]="['/produits', produit.id]">
      <div class="product-image">
        <img [src]="produit.imageUrl || '/assets/placeholder.jpg'" [alt]="produit.titre">
        <div class="product-badges">
          <mat-chip *ngIf="produit.estVip" color="accent">
            <mat-icon>star</mat-icon> VIP
          </mat-chip>
          <mat-chip [color]="getStatutColor(produit.statut)">
            {{ getStatutLabel(produit.statut) }}
          </mat-chip>
        </div>
      </div>

      <mat-card-content>
        <mat-card-title>{{ produit.titre }}</mat-card-title>
        <p class="description">{{ produit.description }}</p>
        
        <div class="produit-details">
          <div class="price">
            <strong>{{ formatPrix(produit.prix) }}</strong>
          </div>
          <div class="info-row" *ngIf="produit.localisation">
            <mat-icon>location_on</mat-icon>
            <span>{{ produit.localisation }}</span>
          </div>
          <div class="info-row">
            <mat-icon>visibility</mat-icon>
            <span>{{ produit.vues || 0 }} vues</span>
          </div>
          <div class="info-row">
            <mat-icon>calendar_today</mat-icon>
            <span>{{ produit.dateCreation | date:'dd/MM/yyyy' }}</span>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button color="primary" [routerLink]="['/produits', produit.id]" (click)="$event.stopPropagation()">
          <mat-icon>visibility</mat-icon>
          Voir
        </button>
        <button mat-button color="accent" (click)="editProduct(produit); $event.stopPropagation()">
          <mat-icon>edit</mat-icon>
          Modifier
        </button>
        <button mat-button color="warn" (click)="deleteProduct(produit); $event.stopPropagation()">
          <mat-icon>delete</mat-icon>
          Supprimer
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
